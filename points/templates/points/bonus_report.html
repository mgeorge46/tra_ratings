{% extends "tra_theme/base.html" %}
{% block title %}Search Motor Rating{% endblock %}
{% block content %}

<h2>Weekly Bonus Report</h2>
<form method="get">
    <label for="date">Filter by Week Start:</label>
    <select name="date" id="date" onchange="this.form.submit()">
        <option value="">All</option>
        {% for date in unique_dates %}
            <option value="{{ date }}" {% if date|stringformat:"s" == selected_date %}selected{% endif %}>
                {{ date }}
            </option>
        {% endfor %}
    </select>
</form>

<table border="1">
    <tr>
        <th>User</th>
        <th>Week Start</th>
        <th>Date Awarded</th>
    </tr>
    {% for log in logs %}
    <tr>
        <td>{{ log.user.email|default:log.user.contact_number }}</td>
        <td>{{ log.week_start }}</td>
        <td>{{ log.awarded_at }}</td>
    </tr>
    {% empty %}
    <tr><td colspan="3">No bonuses awarded yet.</td></tr>
    {% endfor %}
</table>

{% endblock %}
